ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.5) +
stat_smooth(data = data, aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_text_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(row_number() == max(row_number())),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.5) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'lightgrey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_text_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(row_number() == max(row_number())),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
#
highlight = c('Egypt', 'South Africa',
'Brazil', 'Canada', 'Colombia', 'Uruguay', 'Chile',
'Israel', 'Japan', 'Singapore', 'Hong Kong', 'Turkey',
'Norway', 'Sweden', 'Hungary',
'New Zealand', 'Australia')
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_text_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(row_number() == max(row_number())),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
ggrepel::geom_label_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(row_number() == max(row_number())),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
ggrepel::geom_label_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(gdp == max(gdp)),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
?geom_label_repel
#
highlight = c('South Africa',
'Brazil', 'Canada', 'Colombia', 'Chile',
'Israel', 'Japan', 'Singapore', 'Turkey',
'Norway', 'Sweden', 'Hungary',
'New Zealand', 'Australia')
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
ggrepel::geom_label_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(gdp == max(gdp)),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
wage = read.csv('minimum_wage.csv') %>%
dplyr::mutate(iso_a3 = countrycode(country,
destination = 'iso3c', origin = 'country.name'),
country = countrycode(iso_a3,
origin = 'iso3c', destination = 'cldr.short.en')) %>%
dplyr::select(-iso_a3) %>%
tidyr::drop_na()
gc()
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
ggrepel::geom_label_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp, y = dollar_price, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
ggrepel::geom_label_repel(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp, y = dollar_price * 1.025, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_label(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp, y = dollar_price * 1.025, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_label(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp, y = dollar_price * 1.0125, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_label(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp, y = dollar_price * 0.95, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_label(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp * 0.95, y = dollar_price * 0.95, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_label(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp * 0.85, y = dollar_price * 0.95, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
#
highlight = c('South Africa',
'Brazil', 'Canada', 'Chile',
'Israel', 'Japan', 'Singapore', 'Turkey',
'Norway', 'Sweden', 'Hungary',
'New Zealand', 'Australia')
ggplot() +
geom_point(data = data, aes(x = gdp, y = dollar_price), show.legend = F, size = 3, col = 'lightgrey', alpha = 0.35) +
stat_smooth(data = data %>% dplyr::filter(!(country %in% highlight)),
aes(x = gdp, y = dollar_price, group = country), col = 'grey',
formula = y~x, method = 'lm', se = F, show.legend = F) +
stat_smooth(data = data %>% dplyr::filter(country %in% highlight),
aes(x = gdp, y = dollar_price, group = country, col = continent),
formula = y~x, method = 'lm', se = F, show.legend = F) +
geom_label(data = data %>% dplyr::filter(country %in% highlight) %>% dplyr::group_by(country) %>% dplyr::filter(dollar_price == max(dollar_price)),
aes(x = gdp * 0.85, y = dollar_price * 0.95, label = country)) +
facet_wrap(~continent, scales = 'free') +
ggthemes::scale_color_gdocs()  +
theme(panel.grid.minor = element_blank())
ggsave('dollar_price_vs_gdp.png', width = 16, height = 9, units = 'in', dpi = 500, scale = 0.6)
wage = read.csv('minimum_wage.csv') %>%
dplyr::mutate(iso_a3 = countrycode(country,
destination = 'iso3c', origin = 'country.name'),
country = countrycode(iso_a3,
origin = 'iso3c', destination = 'cldr.short.en')) %>%
dplyr::select(-iso_a3) %>%
tidyr::drop_na()
merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
continent = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent)) %>%
dplyr::mutate(country = forcats::fct_reorder(country, hour)) %>%
ggplot() +
geom_bar(aes(x = country, y = hour, fill = continent), stat = 'identity', show.legend = F) +
facet_wrap(~continent, scales = 'free_y') +
coord_flip() +
ggthemes::scale_fill_gdocs() +
theme(panel.grid.minor = element_blank())
temp = merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
continent = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent))
gc()
merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
region = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent)) %>%
dplyr::mutate(country = forcats::fct_reorder(country, hour)) %>%
ggplot() +
geom_bar(aes(x = country, y = hour, fill = region), stat = 'identity', show.legend = F) +
facet_wrap(~continent, scales = 'free_y') +
coord_flip() +
ggthemes::scale_fill_gdocs() +
theme(panel.grid.minor = element_blank())
merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
region = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent)) %>%
dplyr::mutate(country = forcats::fct_reorder(country, hour)) %>%
ggplot() +
geom_bar(aes(x = country, y = hour, fill = continent), stat = 'identity', show.legend = F) +
facet_wrap(~continent, scales = 'free_y') +
coord_flip() +
ggthemes::scale_fill_gdocs() +
theme(panel.grid.minor = element_blank())
merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
region = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent)) %>%
dplyr::mutate(country = forcats::fct_reorder(country, hour)) %>%
ggplot() +
geom_bar(aes(x = country, y = hour, fill = continent), stat = 'identity', show.legend = F) +
facet_wrap(~region, scales = 'free_y') +
coord_flip() +
ggthemes::scale_fill_gdocs() +
theme(panel.grid.minor = element_blank())
merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
region = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent)) %>%
dplyr::mutate(country = forcats::fct_reorder(country, hour)) %>%
ggplot() +
geom_bar(aes(x = country, y = hour, fill = continent), stat = 'identity', show.legend = F) +
facet_wrap(~region, scales = 'free_y') +
coord_flip() +
ggthemes::scale_fill_gdocs() +
theme(panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank())
gc9
gc()
temp = merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
continent = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent))
target = c('China', 'Hong Kong', 'India', 'Japan', 'South Korea', 'Taiwan', 'Thailand', 'UK', 'US')
ggplot(temp %>% dplyr::filter(!(country %in% target)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'grey', lwd = 1.5) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top')
# hours to get big mac
merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
region = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent)) %>%
dplyr::mutate(country = forcats::fct_reorder(country, hour)) %>%
ggplot() +
geom_bar(aes(x = country, y = hour, fill = continent), stat = 'identity', show.legend = F) +
facet_wrap(~region, scales = 'free_y') +
coord_flip() +
ggthemes::scale_fill_gdocs() +
theme(panel.grid.minor = element_blank(),
panel.grid.major.y = element_blank())
ggsave('working_hour.png', width = 16, height = 9, units = 'in', dpi = 500, scale = 0.6)
# hourly wage vs dollar price
temp = merge(data, wage, by = 'country') %>%
dplyr::filter(year == 2020) %>%
dplyr::mutate(hour = dollar_price / hourly_wage,
continent = ifelse(continent %in% c('Africa', 'Oceania'), 'Africa & Oceania', continent))
highlight = c('China', 'Hong Kong', 'India', 'Japan', 'South Korea', 'Taiwan', 'Thailand', 'UK', 'US')
ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'grey', lwd = 1.5) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top')
ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top')
ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
p = ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
plotly::ggplotly(p)
highlight = c('China', 'Hong Kong', 'India', 'Japan', 'South Korea', 'Taiwan', 'Thailand',
'UK', 'US', 'Canada', 'Israel', 'Australia', 'New Zealand',
'Uruguay', 'Turkey')
ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot(temp %>% dplyr::filter(!(country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
# stat_smooth(formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
ggrepel::geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
gc()
head(temp)
ggplot(aes(x = hourly_wage, y = dollar_price, label = country)) +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(color = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% target)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% target),
aes(x = hourly_wage, y = dollar_price, label = country)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country, col = continent)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggsave('hourly_wage_vs_dollar_price.png', width = 16, height = 9, units = 'in', dpi = 500, scale = 0.6)
highlight = c('China', 'India', 'Japan', 'South Korea', 'Taiwan', 'Thailand',
'UK', 'US', 'Canada', 'Israel', 'Australia', 'New Zealand',
'Uruguay', 'Turkey', 'Brazil')
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country, col = continent), show.legend = F) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggsave('hourly_wage_vs_dollar_price.png', width = 16, height = 9, units = 'in', dpi = 500, scale = 0.6)
highlight = c('India', 'Japan', 'South Korea', 'Taiwan',
'UK', 'US', 'Canada', 'Israel', 'Australia', 'New Zealand',
'Uruguay', 'Turkey', 'Brazil')
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country, col = continent), show.legend = F) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggsave('hourly_wage_vs_dollar_price.png', width = 16, height = 9, units = 'in', dpi = 500, scale = 0.6)
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 3), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country, col = continent), show.legend = F) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 4), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country, col = continent), show.legend = F) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggplot() +
geom_point(data = temp %>% dplyr::filter((!country %in% highlight)),
aes(x = hourly_wage, y = dollar_price, col = continent), shape = 21, fill = 'white', size = 5, stroke = 1.5) +
stat_smooth(data = temp,
aes(x = hourly_wage, y = dollar_price, group = 1),
formula = y~poly(x, 2), method = 'lm', se = F, col = 'black', lwd = 1.5, fullrange = T) +
geom_label_repel(data = temp %>% dplyr::filter(country %in% highlight),
aes(x = hourly_wage, y = dollar_price, label = country, col = continent), show.legend = F) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'top',
panel.grid.minor = element_blank())
ggsave('hourly_wage_vs_dollar_price.png', width = 16, height = 9, units = 'in', dpi = 500, scale = 0.6)
data %>%
dplyr::group_by(country) %>%
arrange(year) %>%
dplyr::mutate(growth = (local_price / lag(local_price)) - 1) %>%
tidyr::drop_na(growth) %>%
# dplyr::filter(!(continent %in% c('Oceania','Africa'))) %>%
ggplot(aes(x = growth, y = year, group = year)) +
ggridges::stat_density_ridges(quantile_lines = TRUE, scale = 1.5,
quantiles = 0.5, alpha = 0.5,
rel_min_height = 0.05) +
# ggridges::geom_density_ridges2(scale = 0.95) +
# facet_wrap(~continent, ncol = 1) +
scale_x_continuous(limits = c(-.05, 0.3),
labels = scales::percent) +
scale_y_continuous(breaks = seq(2000, 2020, 4)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'None',
panel.grid.minor = element_blank())
gc()
data %>%
dplyr::group_by(country) %>%
arrange(year) %>%
dplyr::mutate(growth = (local_price / lag(local_price)) - 1) %>%
tidyr::drop_na(growth) %>%
# dplyr::filter(!(continent %in% c('Oceania','Africa'))) %>%
ggplot(aes(x = growth, y = year, group = year)) +
geom_boxplot() +
# ggridges::geom_density_ridges2(scale = 0.95) +
# facet_wrap(~continent, ncol = 1) +
scale_x_continuous(limits = c(-.05, 0.3),
labels = scales::percent) +
scale_y_continuous(breaks = seq(2000, 2020, 4)) +
ggthemes::scale_color_gdocs() +
theme(legend.position = 'None',
panel.grid.minor = element_blank())
gc()
head(wage)
